<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin Dashboard â€“ SafeVoice</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #F4F2FF;
        }

        .card-soft {
            border-radius: 18px;
            box-shadow: 0 8px 25px rgba(108, 99, 255, 0.08);
        }

        .stat-card {
            border-radius: 18px;
            padding: 25px;
            color: white;
        }

        .stat-total { background: linear-gradient(90deg, #6C63FF, #8E6CFF); }
        .stat-high { background: #E63946; }
        .stat-medium { background: #F4A261; }
        .stat-low { background: #4CAF50; }

        .severity-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .high { background: #FFE5E7; color: #E63946; }
        .medium { background: #FFF4E5; color: #F4A261; }
        .low { background: #E8F8EE; color: #4CAF50; }

        .emergency-row {
            background-color: #FFF1F2;
        }

        .btn-purple {
            background: #6C63FF;
            border: none;
            border-radius: 10px;
            color: white;
        }

        .btn-purple:hover {
            opacity: 0.9;
        }

        table th {
            font-weight: 600;
        }
    </style>
</head>
<body>

<div class="container py-5">

    <!-- Title -->
    <div class="mb-4">
        <h2 class="fw-bold">Admin Dashboard</h2>
        <p class="text-muted">Monitor and manage all safety reports</p>
    </div>

    <!-- Stats Row -->
    <div class="row mb-4 g-3">
        <div class="col-md-3">
            <div class="stat-card stat-total text-center">
                <h5>Total Cases</h5>
                <h3>{{ total }}</h3>
            </div>
        </div>

        <div class="col-md-3">
            <div class="stat-card stat-high text-center">
                <h5>High</h5>
                <h3>{{ high }}</h3>
            </div>
        </div>

        <div class="col-md-3">
            <div class="stat-card stat-medium text-center">
                <h5>Medium</h5>
                <h3>{{ medium }}</h3>
            </div>
        </div>

        <div class="col-md-3">
            <div class="stat-card stat-low text-center">
                <h5>Low</h5>
                <h3>{{ low }}</h3>
            </div>
        </div>
    </div>

    <!-- Cases Table -->
    <div class="card card-soft p-4">

        <div class="table-responsive">
            <table class="table align-middle">
                <thead>
                    <tr>
                        <th>Case ID</th>
                        <th>Category</th>
                        <th>Severity</th>
                        <th>Status</th>
                        <th>Emergency</th>
                        <th>Actions</th>
                    </tr>
                </thead>

                <tbody>
                    {% for r in reports %}
                    <tr class="{% if r.is_emergency %}emergency-row{% endif %}">
                        <td><strong>{{ r.case_id }}</strong></td>
                        <td>{{ r.category }}</td>

                        <td>
                            <span class="severity-badge {{ r.severity }}">
                                {{ r.severity|upper }}
                            </span>
                        </td>

                        <td>{{ r.status|title }}</td>

                        <td>
                            {% if r.is_emergency %}
                                ðŸš¨
                            {% else %}
                                â€”
                            {% endif %}
                        </td>

                        <td>
                            <a href="/case/{{ r.case_id }}/" class="btn btn-sm btn-purple">
                                View
                            </a>

                            <a href="/chat/{{ r.case_id }}/" class="btn btn-sm btn-outline-secondary">
                                Chat
                            </a>
                        </td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="6" class="text-center text-muted">
                            No reports found.
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

    </div>

</div>

</body>
</html>


