<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Case Detail ‚Äì SafeVoice</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #F4F2FF;
        }

        .card-soft {
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(108, 99, 255, 0.08);
        }

        .severity-badge {
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .high { background: #FFE5E7; color: #E63946; }
        .medium { background: #FFF4E5; color: #F4A261; }
        .low { background: #E8F8EE; color: #4CAF50; }

        .status-badge {
            background: #EDE9FF;
            color: #6C63FF;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .btn-purple {
            background: linear-gradient(90deg, #6C63FF, #8E6CFF);
            border: none;
            border-radius: 12px;
            color: white;
            padding: 10px 18px;
            font-weight: 600;
        }

        .btn-purple:hover {
            opacity: 0.9;
        }

        .section-title {
            font-weight: 600;
            margin-bottom: 15px;
        }
    </style>
</head>
<body>

<div class="container py-5">

    <!-- Header -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <h2 class="fw-bold">Case {{ report.case_id }}</h2>
            <span class="status-badge">{{ report.status|title }}</span>
        </div>

        <div>
            {% if report.is_emergency %}
                <span class="badge bg-danger">üö® EMERGENCY</span>
            {% endif %}
        </div>
    </div>

    <!-- Summary Row -->
    <div class="row g-4 mb-4">

        <!-- Basic Info -->
        <div class="col-md-6">
            <div class="card card-soft p-4">
                <h5 class="section-title">Case Information</h5>

                <p><strong>Category:</strong> {{ report.category }}</p>

                <p>
                    <strong>Severity:</strong>
                    <span class="severity-badge {{ report.severity }}">
                        {{ report.severity|upper }}
                    </span>
                </p>

                <p><strong>Confidence:</strong> {{ report.confidence_score }}%</p>
                <p><strong>Date:</strong> {{ report.incident_date }}</p>
                <p><strong>Created:</strong> {{ report.created_at }}</p>
            </div>
        </div>

        <!-- Location & Evidence -->
        <div class="col-md-6">
            <div class="card card-soft p-4">
                <h5 class="section-title">Location & Evidence</h5>

                <p><strong>Location:</strong> {{ report.location }}</p>

                {% if report.latitude and report.longitude %}
                    <a href="https://www.google.com/maps/search/?api=1&query={{ report.location|urlencode }}" target="_blank">
    View on Map üåç
</a>


                {% endif %}

                <hr>

                <p><strong>Evidence:</strong></p>

                {% if report.evidence %}
                    <a href="{{ report.evidence.url }}" target="_blank" class="btn btn-sm btn-outline-secondary">
                        View File
                    </a>
                {% else %}
                    <p class="text-muted">No evidence uploaded.</p>
                {% endif %}
            </div>
        </div>

    </div>

    <!-- Description -->
    <div class="card card-soft p-4 mb-4">
        <h5 class="section-title">Incident Description</h5>
        <p>{{ report.description }}</p>
    </div>

    <!-- Quick Actions -->
    <div class="card card-soft p-4">
        <h5 class="section-title">Actions</h5>

        <div class="d-flex gap-3 flex-wrap">
            <a href="/chat/{{ report.case_id }}/" class="btn btn-purple">
                Open Chat
            </a>

            <a href="/timeline/{{ report.case_id }}/" class="btn btn-outline-secondary">
                View Timeline
            </a>

            <a href="/update/{{ report.case_id }}/" class="btn btn-outline-primary">
                Update Status
            </a>

            <a href="/legal/{{ report.case_id }}/" class="btn btn-outline-dark">
                View Legal Guidance
            </a>

       <a href="{% url 'download_pdf' report.case_id %}" class="btn btn-outline-success">
    Download PDF
</a>

        </div>
    </div>

</div>

</body>
</html>

