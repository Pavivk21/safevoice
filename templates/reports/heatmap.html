<!DOCTYPE html>
<html>
<head>
    <title>Unsafe Zone Heatmap</title>

    <link rel="stylesheet"
     href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <style>
        #map {
            height: 600px;
            width: 80%;
            margin: auto;
        }
    </style>
</head>

<body>

<h2 align="center">Unsafe Zones Heatmap</h2>

<div id="map"></div>

<script>

var map = L.map('map').setView([20.5937, 78.9629], 5); // India center

L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 18,
}).addTo(map);

var points = JSON.parse('{{ points|escapejs }}');


points.forEach(function(p){

    var color = "blue";

    if(p.severity == "high") color = "red";
    if(p.severity == "medium") color = "orange";

    L.circleMarker([p.lat, p.lng], {
        radius: 8,
        color: color,
        fillOpacity: 0.7
    }).addTo(map);

});

</script>

</body>
</html>

