<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SafeVoice – Public Dashboard</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #F4F2FF;
        }

        .stat-card {
            background: white;
            border-radius: 18px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 10px 25px rgba(108, 99, 255, 0.08);
        }

        .stat-number {
            font-size: 28px;
            font-weight: 700;
            color: #6C63FF;
        }

        .stat-label {
            font-size: 14px;
            color: #777;
        }

        .chart-card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 25px rgba(108, 99, 255, 0.08);
        }
    </style>
</head>
<body>

<div class="container py-5">

    <div class="text-center mb-5">
        <h2 class="fw-bold">Community Safety Overview</h2>
        <p class="text-muted">Transparency builds trust. Here’s our live safety data.</p>
    </div>

    <!-- Stats Row -->
    <div class="row g-4 mb-5">

        <div class="col-md-3">
            <div class="stat-card">
                <div class="stat-number">{{ total }}</div>
                <div class="stat-label">Total Reports</div>
            </div>
        </div>

        <div class="col-md-3">
            <div class="stat-card">
                <div class="stat-number">{{ high }}</div>
                <div class="stat-label">High Severity</div>
            </div>
        </div>

        <div class="col-md-3">
            <div class="stat-card">
                <div class="stat-number">{{ medium }}</div>
                <div class="stat-label">Medium Severity</div>
            </div>
        </div>

        <div class="col-md-3">
            <div class="stat-card">
                <div class="stat-number">{{ low }}</div>
                <div class="stat-label">Low Severity</div>
            </div>
        </div>

    </div>

    <!-- Charts -->
    <div class="row g-4">

        <!-- Severity Pie -->
        <div class="col-md-6">
            <div class="chart-card">
                <h5 class="mb-3">Severity Distribution</h5>
                <canvas id="severityChart"></canvas>
            </div>
        </div>

        <!-- Trend Line -->
        <div class="col-md-6">
            <div class="chart-card">
                <h5 class="mb-3">Reports Over Time</h5>
                <canvas id="trendChart"></canvas>
            </div>
        </div>

    </div>

</div>

<script>
    const severityData = {{ severity_data|safe }};
    const trendLabels = {{ labels|safe }};
    const trendValues = {{ values|safe }};

    new Chart(document.getElementById('severityChart'), {
        type: 'doughnut',
        data: {
            labels: ['High', 'Medium', 'Low'],
            datasets: [{
                data: severityData,
                backgroundColor: ['#FF6B6B', '#FFD93D', '#6C63FF']
            }]
        }
    });

    new Chart(document.getElementById('trendChart'), {
        type: 'line',
        data: {
            labels: trendLabels,
            datasets: [{
                label: 'Reports',
                data: trendValues,
                borderColor: '#6C63FF',
                backgroundColor: 'rgba(108, 99, 255, 0.1)',
                fill: true,
                tension: 0.4
            }]
        }
    });
</script>

</body>
</html>






